#### Pekka Shop server ####
server {
     server_name shop.pekkaparviainen.com  www.shop.pekkaparviainen.com; # IP
     keepalive_timeout 70;

     listen 443 ssl; # managed by Certbot
    # ssl_certificate /etc/letsencrypt/live/shop.pekkaparviainen.com/fullchain.pem; # m>
    # ssl_certificate_key /etc/letsencrypt/live/shop.pekkaparviainen.com/privkey.pem; #>
    # include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    # ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


     location / {
       proxy_pass http://localhost:3000/;
       proxy_http_version 1.1;
      # proxy_set_header X-Forwarded-Host $host;
      # proxy_set_header X-Forwarded-Server $host;
      # proxy_set_header X-Real-IP $remote_addr;
      # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      # proxy_set_header X-Forwarded-Proto $scheme;
      # proxy_set_header Host $http_host;
      # proxy_set_header Upgrade $http_upgrade;
      # proxy_set_header Connection "Upgrade";
      # proxy_pass_request_headers on;
     }
    ssl_certificate /etc/letsencrypt/live/shop.pekkaparviainen.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/shop.pekkaparviainen.com/privkey.pem; # managed by Certbot



}
### TOTO SERVER ###
server {

listen 80;
listen [::]:80;
      server_name toto.kumstrapi.xyz; # IP
      keepalive_timeout 70;

      location / {
        proxy_pass http://localhost:8000/;
        proxy_http_version 1.1;
       # proxy_set_header X-Forwarded-Host $host;
       # proxy_set_header X-Forwarded-Server $host;
       # proxy_set_header X-Real-IP $remote_addr;
       # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       # proxy_set_header X-Forwarded-Proto $scheme;
       # proxy_set_header Host $http_host;
       # proxy_set_header Upgrade $http_upgrade;
       # proxy_set_header Connection "Upgrade";
       # proxy_pass_request_headers on;
      }
}
### TOTO FRONTEND ###
 server {

listen 80;
listen [::]:80;
       server_name front_toto.kumstrapi.xyz; # IP
       keepalive_timeout 70;

       location / {
         proxy_pass http://localhost:3001/;
         proxy_http_version 1.1;
        # proxy_set_header X-Forwarded-Host $host;
        # proxy_set_header X-Forwarded-Server $host;
        # proxy_set_header X-Real-IP $remote_addr;
        # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        # proxy_set_header X-Forwarded-Proto $scheme;
        # proxy_set_header Host $http_host;
        # proxy_set_header Upgrade $http_upgrade;
        # proxy_set_header Connection "Upgrade";
        # proxy_pass_request_headers on;
       }
}
### NHL FROTNTEND ###
server {

listen 80;
listen [::]:80;
     server_name nhl.kumstrapi.xyz; # IP
     keepalive_timeout 70;

     location / {
       proxy_pass http://localhost:3030/;
       proxy_http_version 1.1;
      # proxy_set_header X-Forwarded-Host $host;
      # proxy_set_header X-Forwarded-Server $host;
      # proxy_set_header X-Real-IP $remote_addr;
      # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      # proxy_set_header X-Forwarded-Proto $scheme;
      # proxy_set_header Host $http_host;
      # proxy_set_header Upgrade $http_upgrade;
      # proxy_set_header Connection "Upgrade";
      # proxy_pass_request_headers on;
     }

}

server {
    if ($host = www.shop.pekkaparviainen.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    if ($host = shop.pekkaparviainen.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot



listen 80;
listen [::]:80;
     server_name shop.pekkaparviainen.com  www.shop.pekkaparviainen.com;
    return 404; # managed by Certbot




}
